(function framework7ComponentLoader(e,a){void 0===a&&(a=!0);document,window;var t=e.$,r=(e.Template7,e.utils),l=(e.device,e.support),n=e.Class,i=(e.Modal,e.ConstructorMethods),s=(e.ModalMethods,function(e){function a(a,n){e.call(this,n,[a]);var i=this,s={el:null,inputEl:null,dual:!1,step:1,label:!1,min:0,max:100,value:0,draggableBar:!0,vertical:!1,verticalReversed:!1,formatLabel:null,scale:!1,scaleSteps:5,scaleSubSteps:0,formatScaleLabel:null};i.useModulesParams(s),i.params=r.extend(s,n);var o=i.params.el;if(!o)return i;var u=t(o);if(0===u.length)return i;if(u[0].f7Range)return u[0].f7Range;var c,v=u.dataset();"step min max value scaleSteps scaleSubSteps".split(" ").forEach(function(e){void 0===n[e]&&void 0!==v[e]&&(i.params[e]=parseFloat(v[e]))}),"dual label vertical verticalReversed scale".split(" ").forEach(function(e){void 0===n[e]&&void 0!==v[e]&&(i.params[e]=v[e])}),i.params.value||(void 0!==v.value&&(i.params.value=v.value),void 0!==v.valueLeft&&void 0!==v.valueRight&&(i.params.value=[parseFloat(v.valueLeft),parseFloat(v.valueRight)])),i.params.dual||(i.params.inputEl?c=t(i.params.inputEl):u.find('input[type="range"]').length&&(c=u.find('input[type="range"]').eq(0)));var p=i.params,d=p.dual,g=p.step,h=p.label,f=p.min,m=p.max,b=p.value,y=p.vertical,S=p.verticalReversed,$=p.scale,E=p.scaleSteps,x=p.scaleSubSteps;r.extend(i,{app:a,$el:u,el:u[0],$inputEl:c,inputEl:c?c[0]:void 0,dual:d,step:g,label:h,min:f,max:m,value:b,previousValue:b,vertical:y,verticalReversed:S,scale:$,scaleSteps:E,scaleSubSteps:x}),c&&("step min max".split(" ").forEach(function(e){!n[e]&&c.attr(e)&&(i.params[e]=parseFloat(c.attr(e)),i[e]=parseFloat(c.attr(e)))}),void 0!==c.val()&&(i.params.value=parseFloat(c.val()),i.value=parseFloat(c.val()))),i.dual&&u.addClass("range-slider-dual"),i.label&&u.addClass("range-slider-label"),i.vertical?(u.addClass("range-slider-vertical"),i.verticalReversed&&u.addClass("range-slider-vertical-reversed")):u.addClass("range-slider-horizontal");var R=t('<div class="range-bar"></div>'),k=t('<div class="range-bar-active"></div>');R.append(k);var M='\n      <div class="range-knob-wrap">\n        <div class="range-knob"></div>\n        '+(i.label?'<div class="range-knob-label"></div>':"")+"\n      </div>\n    ",C=[t(M)];i.dual&&C.push(t(M)),u.append(R),C.forEach(function(e){u.append(e)});var L,V,W=[];i.label&&(W.push(C[0].find(".range-knob-label")),i.dual&&W.push(C[1].find(".range-knob-label"))),i.scale&&i.scaleSteps>1&&(L=t('\n        <div class="range-scale">\n          '+i.renderScale()+"\n        </div>\n      "),u.append(L)),r.extend(i,{knobs:C,labels:W,$barEl:R,$barActiveEl:k,$scaleEl:L}),u[0].f7Range=i;var w,H,F,z,A,T,B,P,X,Y,_={};function D(){B=!0}function O(e){if(!V&&(i.params.draggableBar||0!==t(e.target).closest(".range-knob").length)){var a;B=!1,_.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,_.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,V=!0,w=void 0,H=u.offset(),F=H.left,z=H.top,i.vertical?(a=(_.y-z)/i.rangeHeight,i.verticalReversed||(a=1-a)):a=i.app.rtl?(F+i.rangeWidth-_.x)/i.rangeWidth:(_.x-F)/i.rangeWidth;var l=a*(i.max-i.min)+i.min;i.dual?Math.abs(i.value[0]-l)<Math.abs(i.value[1]-l)?(T=0,A=i.knobs[0],l=[l,i.value[1]]):(T=1,A=i.knobs[1],l=[i.value[0],l]):(A=i.knobs[0],l=a*(i.max-i.min)+i.min),r.nextTick(function(){V&&A.addClass("range-knob-active-state")},70),i.on("change",D),i.setValue(l,!0)}}function q(e){if(V){var a="touchmove"===e.type?e.targetTouches[0].pageX:e.pageX,t="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;if(void 0===w&&(w=i.vertical?!(w||Math.abs(t-_.y)>Math.abs(a-_.x)):!!(w||Math.abs(t-_.y)>Math.abs(a-_.x))),w)V=!1;else{var r;e.preventDefault(),i.vertical?(r=(t-z)/i.rangeHeight,i.verticalReversed||(r=1-r)):r=i.app.rtl?(F+i.rangeWidth-a)/i.rangeWidth:(a-F)/i.rangeWidth;var l,n,s=r*(i.max-i.min)+i.min;if(i.dual)0===T?(l=s)>(n=i.value[1])&&(n=l):(n=s)<(l=i.value[0])&&(l=n),s=[l,n];i.setValue(s,!0)}}}function j(){if(!V)return w&&A.removeClass("range-knob-active-state"),void(V=!1);i.off("change",D),V=!1,A.removeClass("range-knob-active-state"),B&&i.$inputEl&&!i.dual&&i.$inputEl.trigger("change"),B=!1,void 0!==i.previousValue&&(i.dual&&(i.previousValue[0]!==i.value[0]||i.previousValue[1]!==i.value[1])||!i.dual&&i.previousValue!==i.value)&&(i.$el.trigger("range:changed",i,i.value),i.emit("local::changed rangeChanged",i,i.value))}function I(){i.calcSize(),i.layout()}return i.attachEvents=function(){var e=!!l.passiveListener&&{passive:!0};i.$el.on(a.touchEvents.start,O,e),a.on("touchmove",q),a.on("touchend:passive",j),a.on("tabShow",I),a.on("resize",I),(P=i.$el.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast")).on("modal:open",I),(X=i.$el.parents(".panel")).on("panel:open",I),(Y=i.$el.parents(".page").eq(0)).on("page:reinit",I)},i.detachEvents=function(){var e=!!l.passiveListener&&{passive:!0};i.$el.off(a.touchEvents.start,O,e),a.off("touchmove",q),a.off("touchend:passive",j),a.off("tabShow",I),a.off("resize",I),P&&P.off("modal:open",I),X&&X.off("panel:open",I),Y&&Y.off("page:reinit",I),P=null,X=null,Y=null},i.useModules(),i.init(),i}return e&&(a.__proto__=e),a.prototype=Object.create(e&&e.prototype),a.prototype.constructor=a,a.prototype.calcSize=function(){if(this.vertical){var e=this.$el.outerHeight();if(0===e)return;this.rangeHeight=e,this.knobHeight=this.knobs[0].outerHeight()}else{var a=this.$el.outerWidth();if(0===a)return;this.rangeWidth=a,this.knobWidth=this.knobs[0].outerWidth()}},a.prototype.layout=function(){var e,a=this,t=a.app,r=a.knobWidth,l=a.knobHeight,n=a.rangeWidth,i=a.rangeHeight,s=a.min,o=a.max,u=a.knobs,c=a.$barActiveEl,v=a.value,p=a.label,d=a.labels,g=a.vertical,h=a.verticalReversed,f=g?l:r,m=g?i:n,b=g?h?"top":"bottom":t.rtl?"right":"left";if(a.dual){var y=[(v[0]-s)/(o-s),(v[1]-s)/(o-s)];c.css(((e={})[b]=100*y[0]+"%",e[g?"height":"width"]=100*(y[1]-y[0])+"%",e)),u.forEach(function(e,r){var l=m*y[r];if("ios"===t.theme){var n=m*y[r]-f/2;n<0&&(l=f/2),n+f>m&&(l=m-f/2)}e.css(b,l+"px"),p&&d[r].text(a.formatLabel(v[r],d[r][0]))})}else{var S=(v-s)/(o-s);c.css(g?"height":"width",100*S+"%");var $=m*S;if("ios"===t.theme){var E=m*S-f/2;E<0&&($=f/2),E+f>m&&($=m-f/2)}u[0].css(b,$+"px"),p&&d[0].text(a.formatLabel(v,d[0][0]))}a.dual&&v.indexOf(s)>=0||!a.dual&&v===s?a.$el.addClass("range-slider-min"):a.$el.removeClass("range-slider-min"),a.dual&&v.indexOf(o)>=0||!a.dual&&v===o?a.$el.addClass("range-slider-max"):a.$el.removeClass("range-slider-max")},a.prototype.setValue=function(e,a){var t,r,l=this,n=l.step,i=l.min,s=l.max;if(l.dual){r=[l.value[0],l.value[1]];var o=e;if(Array.isArray(o)||(o=[e,e]),e[0]>e[1]&&(o=[o[0],o[0]]),(o=o.map(function(e){return Math.max(Math.min(Math.round(e/n)*n,s),i)}))[0]===l.value[0]&&o[1]===l.value[1])return l;o.forEach(function(e,a){l.value[a]=e}),t=r[0]!==o[0]||r[1]!==o[1],l.layout()}else{r=l.value;var u=Math.max(Math.min(Math.round(e/n)*n,s),i);l.value=u,l.layout(),t=r!==u}return t&&(l.previousValue=r),t?(l.$el.trigger("range:change",l,l.value),l.$inputEl&&!l.dual&&(l.$inputEl.val(l.value),a?l.$inputEl.trigger("input"):l.$inputEl.trigger("input change")),a||(l.$el.trigger("range:changed",l,l.value),l.emit("local::changed rangeChanged",l,l.value)),l.emit("local::change rangeChange",l,l.value),l):l},a.prototype.getValue=function(){return this.value},a.prototype.formatLabel=function(e,a){return this.params.formatLabel?this.params.formatLabel.call(this,e,a):e},a.prototype.formatScaleLabel=function(e){return this.params.formatScaleLabel?this.params.formatScaleLabel.call(this,e):e},a.prototype.renderScale=function(){var e=this,a=e.app,t=e.verticalReversed,r=e.vertical?t?"top":"bottom":a.rtl?"right":"left",l="";return Array.from({length:e.scaleSteps+1}).forEach(function(a,t){var n=(e.max-e.min)/e.scaleSteps,i=e.min+n*t,s=(i-e.min)/(e.max-e.min);l+='<div class="range-scale-step" style="'+r+": "+100*s+'%">'+e.formatScaleLabel(i)+"</div>",e.scaleSubSteps&&e.scaleSubSteps>1&&t<e.scaleSteps&&Array.from({length:e.scaleSubSteps-1}).forEach(function(a,t){var s=n/e.scaleSubSteps,o=(i+s*(t+1)-e.min)/(e.max-e.min);l+='<div class="range-scale-step range-scale-substep" style="'+r+": "+100*o+'%"></div>'})}),l},a.prototype.updateScale=function(){if(!this.scale||this.scaleSteps<2)return this.$scaleEl&&this.$scaleEl.remove(),void delete this.$scaleEl;this.$scaleEl||(this.$scaleEl=t('<div class="range-scale"></div>'),this.$el.append(this.$scaleEl)),this.$scaleEl.html(this.renderScale())},a.prototype.init=function(){return this.calcSize(),this.layout(),this.attachEvents(),this},a.prototype.destroy=function(){var e=this;e.$el.trigger("range:beforedestroy",e),e.emit("local::beforeDestroy rangeBeforeDestroy",e),delete e.$el[0].f7Range,e.detachEvents(),r.deleteProps(e),e=null},a}(n)),o={name:"range",create:function(){var e=this;e.range=r.extend(i({defaultSelector:".range-slider",constructor:s,app:e,domProp:"f7Range"}),{getValue:function(a){void 0===a&&(a=".range-slider");var t=e.range.get(a);if(t)return t.getValue()},setValue:function(a,t){void 0===a&&(a=".range-slider");var r=e.range.get(a);if(r)return r.setValue(t)}})},static:{Range:s},on:{tabMounted:function(e){var a=this;t(e).find(".range-slider-init").each(function(e,t){return new s(a,{el:t})})},tabBeforeRemove:function(e){t(e).find(".range-slider-init").each(function(e,a){a.f7Range&&a.f7Range.destroy()})},pageInit:function(e){var a=this;e.$el.find(".range-slider-init").each(function(e,t){return new s(a,{el:t})})},pageBeforeRemove:function(e){e.$el.find(".range-slider-init").each(function(e,a){a.f7Range&&a.f7Range.destroy()})}},vnode:{"range-slider-init":{insert:function(e){var a=e.elm;this.range.create({el:a})},destroy:function(e){var a=e.elm;a.f7Range&&a.f7Range.destroy()}}}};if(a){if(e.prototype.modules&&e.prototype.modules[o.name])return;e.use(o),e.instance&&(e.instance.useModuleParams(o,e.instance.params),e.instance.useModule(o))}return o}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
