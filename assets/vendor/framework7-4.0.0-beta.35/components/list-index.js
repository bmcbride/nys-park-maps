(function framework7ComponentLoader(e,t){void 0===t&&(t=!0);document,window;var n=e.$,i=(e.Template7,e.utils),s=(e.device,e.support,e.Class),o=(e.Modal,e.ConstructorMethods),a=(e.ModalMethods,function(e){function t(t,s){void 0===s&&(s={}),e.call(this,s,[t]);var o,a,r,l,d=this,p={el:null,listEl:null,indexes:"auto",iosItemHeight:14,mdItemHeight:14,scrollList:!0,label:!1,renderItem:function(e,t){return("\n          <li>"+e+"</li>\n        ").trim()},renderSkipPlaceholder:function(){return'<li class="list-index-skip-placeholder"></li>'},on:{}};if(d.useModulesParams(p),d.params=i.extend(p,s),!d.params.el)return d;if((o=n(d.params.el))[0].f7ListIndex)return o[0].f7ListIndex;if(0===(l=o.find("ul")).length&&(l=n("<ul></ul>"),o.append(l)),d.params.listEl&&(a=n(d.params.listEl)),"auto"===d.params.indexes&&!a)return d;function c(){var e={index:d};d.calcSize(),e!==d.height&&d.render()}function u(e){var t=n(e.target).closest("li");if(t.length){var i=t.index();if(d.skipRate>0){var s=i/(t.siblings("li").length-1);i=Math.round((d.indexes.length-1)*s)}var o=d.indexes[i];d.$el.trigger("listindex:click",o,i),d.emit("local::click listIndexClick",d,o,i),d.$el.trigger("listindex:select",o,i),d.emit("local::select listIndexSelect",d,o,i),d.$listEl&&d.params.scrollList&&d.scrollListToIndex(o,i)}}a?r=a.parents(".page-content").eq(0):0===(r=o.siblings(".page-content").eq(0)).length&&(r=o.parents(".page").eq(0).find(".page-content").eq(0)),o[0].f7ListIndex=d,i.extend(d,{app:t,$el:o,el:o&&o[0],$ul:l,ul:l&&l[0],$listEl:a,listEl:a&&a[0],$pageContentEl:r,pageContentEl:r&&r[0],indexes:s.indexes,height:0,skipRate:0}),d.useModules();var f,h,x,m,g,v={},I=null;function y(e){var t=l.children();t.length&&(x=t[0].getBoundingClientRect().top,m=t[t.length-1].getBoundingClientRect().top+t[0].offsetHeight,v.x="touchstart"===e.type?e.targetTouches[0].pageX:e.pageX,v.y="touchstart"===e.type?e.targetTouches[0].pageY:e.pageY,f=!0,h=!1,I=null)}function L(e){if(f){!h&&d.params.label&&(g=n('<span class="list-index-label"></span>'),o.append(g)),h=!0;var t="touchmove"===e.type?e.targetTouches[0].pageY:e.pageY;e.preventDefault();var i=(t-x)/(m-x);i=Math.min(Math.max(i,0),1);var s=Math.round((d.indexes.length-1)*i),a=d.indexes[s],r=m-x,l=(d.height-r)/2+(1-i)*r;s!==I&&(d.params.label&&g.html(a).transform("translateY(-"+l+"px)"),d.$listEl&&d.params.scrollList&&d.scrollListToIndex(a,s)),I=s,d.$el.trigger("listindex:select",d),d.emit("local::select listIndexSelect",d,a,s)}}function $(){f&&(f=!1,h=!1,d.params.label&&(g&&g.remove(),g=void 0))}var E=!!t.support.passiveListener&&{passive:!0};return d.attachEvents=function(){o.parents(".tab").on("tab:show",c),o.parents(".page").on("page:reinit",c),o.parents(".panel").on("panel:open",c),o.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").on("modal:open",c),t.on("resize",c),o.on("click",u),o.on(t.touchEvents.start,y,E),t.on("touchmove:active",L),t.on("touchend:passive",$)},d.detachEvents=function(){o.parents(".tab").off("tab:show",c),o.parents(".page").off("page:reinit",c),o.parents(".panel").off("panel:open",c),o.parents(".sheet-modal, .actions-modal, .popup, .popover, .login-screen, .dialog, .toast").off("modal:open",c),t.off("resize",c),o.off("click",u),o.off(t.touchEvents.start,y,E),t.off("touchmove:active",L),t.off("touchend:passive",$)},d.init(),d}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.scrollListToIndex=function(e,t){var i,s=this.$listEl,o=this.$pageContentEl;if(!s||!o||0===o.length)return this;if(s.find(".list-group-title, .item-divider").each(function(t,s){if(!i){var o=n(s);o.text()===e&&(i=o)}}),!i||0===i.length)return this;var a=i.parent().offset().top,r=parseInt(o.css("padding-top"),10),l=o[0].scrollTop,d=i.offset().top;return a<=r?o.scrollTop(a+l-r):o.scrollTop(d+l-r),this},t.prototype.renderSkipPlaceholder=function(){return this.params.renderSkipPlaceholder.call(this)},t.prototype.renderItem=function(e,t){return this.params.renderItem.call(this,e,t)},t.prototype.render=function(){var e,t=this,n=t.$ul,i=t.indexes,s=t.skipRate,o=i.map(function(n,i){if(i%s!=0&&s>0)return e=!0,"";var o=t.renderItem(n,i);return e&&(o=t.renderSkipPlaceholder()+o),e=!1,o}).join("");return n.html(o),t},t.prototype.calcSize=function(){var e=this.app,t=this.params,n=this.el,i=this.indexes,s=n.offsetHeight,o="ios"===e.theme?t.iosItemHeight:t.mdItemHeight,a=Math.floor(s/o),r=i.length,l=0;return r>a&&(l=Math.ceil((2*r-1)/a)),this.height=s,this.skipRate=l,this},t.prototype.calcIndexes=function(){var e=this;return"auto"===e.params.indexes?(e.indexes=[],e.$listEl.find(".list-group-title, .item-divider").each(function(t,i){var s=n(i).text();e.indexes.indexOf(s)<0&&e.indexes.push(s)})):e.indexes=e.params.indexes,e},t.prototype.update=function(){return this.calcIndexes(),this.calcSize(),this.render(),this},t.prototype.init=function(){this.calcIndexes(),this.calcSize(),this.render(),this.attachEvents()},t.prototype.destroy=function(){var e=this;e.$el.trigger("listindex:beforedestroy",e),e.emit("local::beforeDestroy listIndexBeforeDestroy",e),e.detachEvents(),e.$el[0]&&(e.$el[0].f7ListIndex=null,delete e.$el[0].f7ListIndex),i.deleteProps(e),e=null},t}(s)),r={name:"listIndex",static:{ListIndex:a},create:function(){this.listIndex=o({defaultSelector:".list-index",constructor:a,app:this,domProp:"f7ListIndex"})},on:{tabMounted:function(e){var t=this;n(e).find(".list-index-init").each(function(e,s){var o=i.extend(n(s).dataset(),{el:s});t.listIndex.create(o)})},tabBeforeRemove:function(e){n(e).find(".list-index-init").each(function(e,t){t.f7ListIndex&&t.f7ListIndex.destroy()})},pageInit:function(e){var t=this;e.$el.find(".list-index-init").each(function(e,s){var o=i.extend(n(s).dataset(),{el:s});t.listIndex.create(o)})},pageBeforeRemove:function(e){e.$el.find(".list-index-init").each(function(e,t){t.f7ListIndex&&t.f7ListIndex.destroy()})}},vnode:{"list-index-init":{insert:function(e){var t=e.elm,s=i.extend(n(t).dataset(),{el:t});this.listIndex.create(s)},destroy:function(e){var t=e.elm;t.f7ListIndex&&t.f7ListIndex.destroy()}}}};if(t){if(e.prototype.modules&&e.prototype.modules[r.name])return;e.use(r),e.instance&&(e.instance.useModuleParams(r,e.instance.params),e.instance.useModule(r))}return r}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
