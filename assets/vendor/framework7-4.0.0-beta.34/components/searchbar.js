(function framework7ComponentLoader(e,a){void 0===a&&(a=!0);var r=document,n=(window,e.$),t=(e.Template7,e.utils),s=(e.device,e.support,e.Class),i=(e.Modal,e.ConstructorMethods),l=(e.ModalMethods,function(e){function a(a,r){void 0===r&&(r={}),e.call(this,r,[a]);var s=this,i={el:void 0,inputEl:void 0,inputEvents:"change input compositionend",disableButton:!0,disableButtonEl:void 0,backdropEl:void 0,searchContainer:void 0,searchItem:"li",searchIn:void 0,searchGroup:".list-group",searchGroupTitle:".item-divider, .list-group-title",ignore:".searchbar-ignore",foundEl:".searchbar-found",notFoundEl:".searchbar-not-found",hideOnEnableEl:".searchbar-hide-on-enable",hideOnSearchEl:".searchbar-hide-on-search",backdrop:!0,removeDiacritics:!0,customSearch:!1,hideDividers:!0,hideGroups:!0,disableOnBackdropClick:!0,expandable:!1};s.useModulesParams(i),s.params=t.extend(i,r);var l,o,c,d,h,b,p,u,f,v,m=n(s.params.el);if(0===m.length)return s;if(m[0].f7Searchbar)return m[0].f7Searchbar;if(m[0].f7Searchbar=s,m.parents(".page").length>0)l=m.parents(".page");else if((o=m.parents(".navbar-inner")).length>0&&!(l=n(a.navbar.getPageByEl(o[0]))).length){var E=m.parents(".view").find(".page-current");E[0]&&E[0].f7Page&&E[0].f7Page.navbarEl===o[0]&&(l=E)}function g(e){e.preventDefault()}function $(e){s.enable(e),s.$el.addClass("searchbar-focused")}function y(){s.$el.removeClass("searchbar-focused")}function C(){var e=s.$inputEl.val().trim();(s.$searchContainer&&s.$searchContainer.length>0&&(s.params.searchIn||s.isVirtualList||s.params.searchIn===s.params.searchItem)||s.params.customSearch)&&s.search(e,!0)}function B(e,a){s.$el.trigger("searchbar:clear",a),s.emit("local::clear searchbarClear",s,a)}function k(e){s.disable(e)}function S(){!s||s&&!s.$el||s.enabled&&(s.$el.removeClass("searchbar-enabled"),s.expandable&&s.$el.parents(".navbar-inner").removeClass("with-searchbar-expandable-enabled"))}function x(){!s||s&&!s.$el||s.enabled&&(s.$el.addClass("searchbar-enabled"),s.expandable&&s.$el.parents(".navbar-inner").addClass("with-searchbar-expandable-enabled"))}return r.foundEl?c=n(r.foundEl):"string"==typeof s.params.foundEl&&l&&(c=l.find(s.params.foundEl)),r.notFoundEl?d=n(r.notFoundEl):"string"==typeof s.params.notFoundEl&&l&&(d=l.find(s.params.notFoundEl)),r.hideOnEnableEl?h=n(r.hideOnEnableEl):"string"==typeof s.params.hideOnEnableEl&&l&&(h=l.find(s.params.hideOnEnableEl)),r.hideOnSearchEl?b=n(r.hideOnSearchEl):"string"==typeof s.params.hideOnSearchEl&&l&&(b=l.find(s.params.hideOnSearchEl)),s.params.backdrop&&0===(p=s.params.backdropEl?n(s.params.backdropEl):l&&l.length>0?l.find(".searchbar-backdrop"):m.siblings(".searchbar-backdrop")).length&&(p=n('<div class="searchbar-backdrop"></div>'),l&&l.length?m.parents(l).length>0&&o&&0===m.parents(o).length?p.insertBefore(m):p.insertBefore(l.find(".page-content").eq(0)):p.insertBefore(m)),s.params.searchContainer&&(u=n(s.params.searchContainer)),f=s.params.inputEl?n(s.params.inputEl):m.find('input[type="search"]').eq(0),s.params.disableButton&&(v=s.params.disableButtonEl?n(s.params.disableButtonEl):m.find(".searchbar-disable-button")),t.extend(s,{app:a,view:a.views.get(m.parents(".view")),$el:m,el:m[0],$backdropEl:p,backdropEl:p&&p[0],$searchContainer:u,searchContainer:u&&u[0],$inputEl:f,inputEl:f[0],$disableButtonEl:v,disableButtonEl:v&&v[0],disableButtonHasMargin:!1,$pageEl:l,pageEl:l&&l[0],$navbarEl:o,navbarEl:o&&o[0],$foundEl:c,foundEl:c&&c[0],$notFoundEl:d,notFoundEl:d&&d[0],$hideOnEnableEl:h,hideOnEnableEl:h&&h[0],$hideOnSearchEl:b,hideOnSearchEl:b&&b[0],previousQuery:"",query:"",isVirtualList:u&&u.hasClass("virtual-list"),virtualList:void 0,enabled:!1,expandable:s.params.expandable||m.hasClass("searchbar-expandable")}),s.attachEvents=function(){m.on("submit",g),s.params.disableButton&&s.$disableButtonEl.on("click",k),s.params.disableOnBackdropClick&&s.$backdropEl&&s.$backdropEl.on("click",k),s.expandable&&"ios"===a.theme&&s.view&&o&&s.$pageEl&&(s.$pageEl.on("page:beforeout",S),s.$pageEl.on("page:beforein",x)),s.$inputEl.on("focus",$),s.$inputEl.on("blur",y),s.$inputEl.on(s.params.inputEvents,C),s.$inputEl.on("input:clear",B)},s.detachEvents=function(){m.off("submit",g),s.params.disableButton&&s.$disableButtonEl.off("click",k),s.params.disableOnBackdropClick&&s.$backdropEl&&s.$backdropEl.off("click",k),s.expandable&&"ios"===a.theme&&s.view&&o&&s.$pageEl&&(s.$pageEl.off("page:beforeout",S),s.$pageEl.off("page:beforein",x)),s.$inputEl.off("focus",$),s.$inputEl.off("blur",y),s.$inputEl.off(s.params.inputEvents,C),s.$inputEl.off("input:clear",B)},s.useModules(),s.init(),s}return e&&(a.__proto__=e),a.prototype=Object.create(e&&e.prototype),a.prototype.constructor=a,a.prototype.clear=function(e){var a=this;if(!a.query&&e&&n(e.target).hasClass("searchbar-clear"))return a.disable(),a;var r=a.value;return a.$inputEl.val("").trigger("change").focus(),a.$el.trigger("searchbar:clear",r),a.emit("local::clear searchbarClear",a,r),a},a.prototype.setDisableButtonMargin=function(){var e=this;if(!e.expandable){var a=e.app;e.$disableButtonEl.transition(0).show(),e.$disableButtonEl.css("margin-"+(a.rtl?"left":"right"),-e.disableButtonEl.offsetWidth+"px"),e._clientLeft=e.$disableButtonEl[0].clientLeft,e.$disableButtonEl.transition(""),e.disableButtonHasMargin=!0}},a.prototype.enable=function(e){var a=this;if(a.enabled)return a;var n=a.app;function s(){a.$backdropEl&&(a.$searchContainer&&a.$searchContainer.length||a.params.customSearch)&&!a.$el.hasClass("searchbar-enabled")&&!a.query&&a.backdropShow(),a.$el.addClass("searchbar-enabled"),(!a.$disableButtonEl||a.$disableButtonEl&&0===a.$disableButtonEl.length)&&a.$el.addClass("searchbar-enabled-no-disable-button"),!a.expandable&&a.$disableButtonEl&&a.$disableButtonEl.length>0&&"ios"===n.theme&&(a.disableButtonHasMargin||a.setDisableButtonMargin(),a.$disableButtonEl.css("margin-"+(n.rtl?"left":"right"),"0px")),a.expandable&&(a.$el.parents(".navbar-inner").hasClass("navbar-inner-large")&&a.$pageEl&&a.$pageEl.find(".page-content").addClass("with-searchbar-expandable-enabled"),"md"===n.theme&&a.$el.parent(".navbar-inner").parent(".navbar").length?a.$el.parent(".navbar-inner").parent(".navbar").addClass("with-searchbar-expandable-enabled"):(a.$el.parent(".navbar-inner").addClass("with-searchbar-expandable-enabled"),a.$el.parent(".navbar-inner-large").addClass("navbar-inner-large-collapsed"))),a.$hideOnEnableEl&&a.$hideOnEnableEl.addClass("hidden-by-searchbar"),a.$el.trigger("searchbar:enable"),a.emit("local::enable searchbarEnable",a)}a.enabled=!0;var i=!1;return!0===e&&r.activeElement!==a.inputEl&&(i=!0),n.device.ios&&"ios"===n.theme?a.expandable?(i&&a.$inputEl.focus(),s()):(i&&a.$inputEl.focus(),!e||"focus"!==e.type&&!0!==e?s():t.nextTick(function(){s()},400)):(i&&a.$inputEl.focus(),"md"===n.theme&&a.expandable&&a.$el.parents(".page, .view, .navbar-inner").scrollLeft(0),s()),a},a.prototype.disable=function(){var e=this;if(!e.enabled)return e;var a=e.app;return e.$inputEl.val("").trigger("change"),e.$el.removeClass("searchbar-enabled searchbar-focused searchbar-enabled-no-disable-button"),e.expandable&&(e.$el.parents(".navbar-inner").hasClass("navbar-inner-large")&&e.$pageEl&&e.$pageEl.find(".page-content").removeClass("with-searchbar-expandable-enabled"),"md"===a.theme&&e.$el.parent(".navbar-inner").parent(".navbar").length?e.$el.parent(".navbar-inner").parent(".navbar").removeClass("with-searchbar-expandable-enabled"):(e.$el.parent(".navbar-inner").removeClass("with-searchbar-expandable-enabled"),e.$pageEl&&e.$pageEl.find(".page-content").trigger("scroll"))),!e.expandable&&e.$disableButtonEl&&e.$disableButtonEl.length>0&&"ios"===a.theme&&e.$disableButtonEl.css("margin-"+(a.rtl?"left":"right"),-e.disableButtonEl.offsetWidth+"px"),e.$backdropEl&&(e.$searchContainer&&e.$searchContainer.length||e.params.customSearch)&&e.backdropHide(),e.enabled=!1,e.$inputEl.blur(),e.$hideOnEnableEl&&e.$hideOnEnableEl.removeClass("hidden-by-searchbar"),e.$el.trigger("searchbar:disable"),e.emit("local::disable searchbarDisable",e),e},a.prototype.toggle=function(){return this.enabled?this.disable():this.enable(!0),this},a.prototype.backdropShow=function(){return this.$backdropEl&&this.$backdropEl.addClass("searchbar-backdrop-in"),this},a.prototype.backdropHide=function(){return this.$backdropEl&&this.$backdropEl.removeClass("searchbar-backdrop-in"),this},a.prototype.search=function(e,a){var r=this;if(r.previousQuery=r.query||"",e===r.previousQuery)return r;a||(r.enabled||r.enable(),r.$inputEl.val(e),r.$inputEl.trigger("input")),r.query=e,r.value=e;var s=r.$searchContainer,i=r.$el,l=r.$foundEl,o=r.$notFoundEl,c=r.$hideOnSearchEl,d=r.isVirtualList;if(e.length>0&&c?c.addClass("hidden-by-searchbar"):c&&c.removeClass("hidden-by-searchbar"),(s&&s.length&&i.hasClass("searchbar-enabled")||r.params.customSearch&&i.hasClass("searchbar-enabled"))&&(0===e.length?r.backdropShow():r.backdropHide()),r.params.customSearch)return i.trigger("searchbar:search",e,r.previousQuery),r.emit("local::search searchbarSearch",r,e,r.previousQuery),r;var h,b=[];if(d){if(r.virtualList=s[0].f7VirtualList,""===e.trim())return r.virtualList.resetFilter(),o&&o.hide(),l&&l.show(),i.trigger("searchbar:search",e,r.previousQuery),r.emit("local::search searchbarSearch",r,e,r.previousQuery),r;if(h=r.params.removeDiacritics?t.removeDiacritics(e):e,r.virtualList.params.searchAll)b=r.virtualList.params.searchAll(h,r.virtualList.items)||[];else if(r.virtualList.params.searchByItem)for(var p=0;p<r.virtualList.items.length;p+=1)r.virtualList.params.searchByItem(h,r.virtualList.params.items[p],p)&&b.push(p)}else{var u;u=r.params.removeDiacritics?t.removeDiacritics(e.trim().toLowerCase()).split(" "):e.trim().toLowerCase().split(" "),s.find(r.params.searchItem).removeClass("hidden-by-searchbar").each(function(e,a){var s=n(a),i=[],l=r.params.searchIn?s.find(r.params.searchIn):s;r.params.searchIn===r.params.searchItem&&(l=s),l.each(function(e,a){var s=n(a).text().trim().toLowerCase();r.params.removeDiacritics&&(s=t.removeDiacritics(s)),i.push(s)}),i=i.join(" ");for(var o=0,c=0;c<u.length;c+=1)i.indexOf(u[c])>=0&&(o+=1);o===u.length||r.params.ignore&&s.is(r.params.ignore)?b.push(s[0]):s.addClass("hidden-by-searchbar")}),r.params.hideDividers&&s.find(r.params.searchGroupTitle).each(function(e,a){for(var t=n(a),s=t.nextAll(r.params.searchItem),i=!0,l=0;l<s.length;l+=1){var o=s.eq(l);if(o.is(r.params.searchGroupTitle))break;o.hasClass("hidden-by-searchbar")||(i=!1)}var c=r.params.ignore&&t.is(r.params.ignore);i&&!c?t.addClass("hidden-by-searchbar"):t.removeClass("hidden-by-searchbar")}),r.params.hideGroups&&s.find(r.params.searchGroup).each(function(e,a){var t=n(a),s=r.params.ignore&&t.is(r.params.ignore);0!==t.find(r.params.searchItem).filter(function(e,a){return!n(a).hasClass("hidden-by-searchbar")}).length||s?t.removeClass("hidden-by-searchbar"):t.addClass("hidden-by-searchbar")})}return 0===b.length?(o&&o.show(),l&&l.hide()):(o&&o.hide(),l&&l.show()),d&&r.virtualList&&r.virtualList.filterItems(b),i.trigger("searchbar:search",e,r.previousQuery,b),r.emit("local::search searchbarSearch",r,e,r.previousQuery,b),r},a.prototype.init=function(){this.attachEvents()},a.prototype.destroy=function(){var e=this;e.emit("local::beforeDestroy searchbarBeforeDestroy",e),e.$el.trigger("searchbar:beforedestroy",e),e.detachEvents(),e.$el[0]&&(e.$el[0].f7Searchbar=null,delete e.$el[0].f7Searchbar),t.deleteProps(e)},a}(s)),o={name:"searchbar",static:{Searchbar:l},create:function(){this.searchbar=i({defaultSelector:".searchbar",constructor:l,app:this,domProp:"f7Searchbar",addMethods:"clear enable disable toggle search".split(" ")})},on:{tabMounted:function(e){var a=this;n(e).find(".searchbar-init").each(function(e,r){var s=n(r);a.searchbar.create(t.extend(s.dataset(),{el:r}))})},tabBeforeRemove:function(e){n(e).find(".searchbar-init").each(function(e,a){a.f7Searchbar&&a.f7Searchbar.destroy&&a.f7Searchbar.destroy()})},pageInit:function(e){var a=this;e.$el.find(".searchbar-init").each(function(e,r){var s=n(r);a.searchbar.create(t.extend(s.dataset(),{el:r}))}),"ios"===a.theme&&e.view&&e.view.router.separateNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each(function(e,r){var s=n(r);a.searchbar.create(t.extend(s.dataset(),{el:r}))})},pageBeforeRemove:function(e){e.$el.find(".searchbar-init").each(function(e,a){a.f7Searchbar&&a.f7Searchbar.destroy&&a.f7Searchbar.destroy()}),"ios"===this.theme&&e.view&&e.view.router.separateNavbar&&e.$navbarEl&&e.$navbarEl.length>0&&e.$navbarEl.find(".searchbar-init").each(function(e,a){a.f7Searchbar&&a.f7Searchbar.destroy&&a.f7Searchbar.destroy()})}},clicks:{".searchbar-clear":function(e,a){void 0===a&&(a={});var r=this.searchbar.get(a.searchbar);r&&r.clear()},".searchbar-enable":function(e,a){void 0===a&&(a={});var r=this.searchbar.get(a.searchbar);r&&r.enable(!0)},".searchbar-disable":function(e,a){void 0===a&&(a={});var r=this.searchbar.get(a.searchbar);r&&r.disable()},".searchbar-toggle":function(e,a){void 0===a&&(a={});var r=this.searchbar.get(a.searchbar);r&&r.toggle()}},vnode:{"searchbar-init":{insert:function(e){var a=e.elm,r=n(a);this.searchbar.create(t.extend(r.dataset(),{el:a}))},destroy:function(e){var a=e.elm;a.f7Searchbar&&a.f7Searchbar.destroy&&a.f7Searchbar.destroy()}}}};if(a){if(e.prototype.modules&&e.prototype.modules[o.name])return;e.use(o),e.instance&&(e.instance.useModuleParams(o,e.instance.params),e.instance.useModule(o))}return o}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
