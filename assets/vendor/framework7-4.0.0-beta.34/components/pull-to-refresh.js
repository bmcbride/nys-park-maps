(function framework7ComponentLoader(t,e){void 0===e&&(e=!0);document,window;var r=t.$,o=(t.Template7,t.utils),n=t.device,s=t.support,a=t.Class,l=(t.Modal,t.ConstructorMethods),i=(t.ModalMethods,function(t){function e(e,o){t.call(this,{},[e]);var a=this,l=r(o),i=l.find(".ptr-preloader");a.$el=l,a.el=l[0],a.app=e,a.bottom=a.$el.hasClass("ptr-bottom"),a.useModulesParams({});var p,c,u,f="md"===e.theme;a.done=function(){return(f?i:l).transitionEnd(function(){l.removeClass("ptr-transitioning ptr-pull-up ptr-pull-down"),l.trigger("ptr:done"),a.emit("local::done ptrDone",l[0])}),l.removeClass("ptr-refreshing").addClass("ptr-transitioning"),a},a.refresh=function(){return l.hasClass("ptr-refreshing")?a:(l.addClass("ptr-transitioning ptr-refreshing"),l.trigger("ptr:refresh",a.done),a.emit("local::refresh ptrRefresh",l[0],a.done),a)};var h,d,v,g,m,b,C,y,T,w,M,P={},E=!1,R=!1,x=!1,D=0,H=!1,$=l.parents(".page");function X(t){if(c){if("android"!==n.os)return;if("targetTouches"in t&&t.targetTouches.length>1)return}l.hasClass("ptr-refreshing")||r(t.target).closest(".sortable-handler").length||(u=!1,y=!1,c=!0,h=void 0,m=void 0,"touchstart"===t.type&&(p=t.targetTouches[0].identifier),P.x="touchstart"===t.type?t.targetTouches[0].pageX:t.pageX,P.y="touchstart"===t.type?t.targetTouches[0].pageY:t.pageY)}function Y(t){if(c){var e,s,H;if("touchmove"===t.type){if(p&&t.touches)for(var $=0;$<t.touches.length;$+=1)t.touches[$].identifier===p&&(H=t.touches[$]);H||(H=t.targetTouches[0]),e=H.pageX,s=H.pageY}else e=t.pageX,s=t.pageY;if(e&&s)if(void 0===h&&(h=!!(h||Math.abs(s-P.y)>Math.abs(e-P.x))),h){if(g=l[0].scrollTop,!u){var X;if(l.removeClass("ptr-transitioning"),T=l[0].scrollHeight,w=l[0].offsetHeight,a.bottom&&(M=T-w),g>T)return void(c=!1);var Y=r(t.target).closest(".ptr-watch-scroll");if(Y.length&&Y.each(function(t,e){e!==o&&e.scrollHeight>e.offsetHeight&&"auto"===r(e).css("overflow")&&(!a.bottom&&e.scrollTop>0||a.bottom&&e.scrollTop<e.scrollHeight-e.offsetHeight)&&(X=!0)}),X)return void(c=!1);C&&(b=l.attr("data-ptr-distance")).indexOf("%")>=0&&(b=T*parseInt(b,10)/100),D=l.hasClass("ptr-refreshing")?b:0,R=!(T!==w&&"ios"===n.os&&!f),x=!1}u=!0,d=s-P.y,void 0===m&&(a.bottom?g!==M:0!==g)&&(m=!0),(a.bottom?d<0&&g>=M||g>M:d>0&&g<=0||g<0)?("ios"===n.os&&parseInt(n.osVersion.split(".")[0],10)>7&&(a.bottom||0!==g||m||(R=!0),a.bottom&&g===M&&!m&&(R=!0)),R||!a.bottom||f||(l.css("-webkit-overflow-scrolling","auto"),l.scrollTop(M),x=!0),(R||x)&&(t.cancelable&&t.preventDefault(),v=(a.bottom?-1*Math.pow(Math.abs(d),.85):Math.pow(d,.85))+D,f?i.transform("translate3d(0,"+v+"px,0)").find(".ptr-arrow").transform("rotate("+(Math.abs(d)/66*180+100)+"deg)"):a.bottom?l.children().transform("translate3d(0,"+v+"px,0)"):l.transform("translate3d(0,"+v+"px,0)")),(R||x)&&Math.pow(Math.abs(d),.85)>b||!R&&Math.abs(d)>=2*b?(E=!0,l.addClass("ptr-pull-up").removeClass("ptr-pull-down")):(E=!1,l.removeClass("ptr-pull-up").addClass("ptr-pull-down")),y||(l.trigger("ptr:pullstart"),a.emit("local::pullStart ptrPullStart",l[0]),y=!0),l.trigger("ptr:pullmove",{event:t,scrollTop:g,translate:v,touchesDiff:d}),a.emit("local::pullMove ptrPullMove",l[0],{event:t,scrollTop:g,translate:v,touchesDiff:d})):(y=!1,l.removeClass("ptr-pull-up ptr-pull-down"),E=!1)}else c=!1}}function _(t){return"touchend"===t.type&&t.changedTouches&&t.changedTouches.length>0&&p&&t.changedTouches[0].identifier!==p?(c=!1,h=!1,u=!1,void(p=null)):c&&u?(v&&(l.addClass("ptr-transitioning"),v=0),f?i.transform("").find(".ptr-arrow").transform(""):a.bottom?l.children().transform(""):l.transform(""),R||!a.bottom||f||l.css("-webkit-overflow-scrolling",""),E?(l.addClass("ptr-refreshing"),l.trigger("ptr:refresh",a.done),a.emit("local::refresh ptrRefresh",l[0],a.done)):l.removeClass("ptr-pull-down"),c=!1,u=!1,void(y&&(l.trigger("ptr:pullend"),a.emit("local::pullEnd ptrPullEnd",l[0])))):(c=!1,void(u=!1))}return($.find(".navbar").length>0||$.parents(".view").children(".navbar").length>0)&&(H=!0),$.hasClass("no-navbar")&&(H=!1),H||a.bottom||l.addClass("ptr-no-navbar"),l.attr("data-ptr-distance")?C=!0:b=f?66:44,$.length&&l.length?(l[0].f7PullToRefresh=a,a.attachEvents=function(){var t=!!s.passiveListener&&{passive:!0};l.on(e.touchEvents.start,X,t),e.on("touchmove:active",Y),e.on("touchend:passive",_)},a.detachEvents=function(){var t=!!s.passiveListener&&{passive:!0};l.off(e.touchEvents.start,X,t),e.off("touchmove:active",Y),e.off("touchend:passive",_)},a.useModules(),a.init(),a):a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.init=function(){this.attachEvents()},e.prototype.destroy=function(){var t=this;t.emit("local::beforeDestroy ptrBeforeDestroy",t),t.$el.trigger("ptr:beforedestroy",t),delete t.el.f7PullToRefresh,t.detachEvents(),o.deleteProps(t),t=null},e}(a)),p={name:"pullToRefresh",create:function(){var t=this;t.ptr=o.extend(l({defaultSelector:".ptr-content",constructor:i,app:t,domProp:"f7PullToRefresh"}),{done:function(e){var r=t.ptr.get(e);if(r)return r.done()},refresh:function(e){var r=t.ptr.get(e);if(r)return r.refresh()}})},static:{PullToRefresh:i},on:{tabMounted:function(t){var e=this;r(t).find(".ptr-content").each(function(t,r){e.ptr.create(r)})},tabBeforeRemove:function(t){var e=r(t),o=this;e.find(".ptr-content").each(function(t,e){o.ptr.destroy(e)})},pageInit:function(t){var e=this;t.$el.find(".ptr-content").each(function(t,r){e.ptr.create(r)})},pageBeforeRemove:function(t){var e=this;t.$el.find(".ptr-content").each(function(t,r){e.ptr.destroy(r)})}}};if(e){if(t.prototype.modules&&t.prototype.modules[p.name])return;t.use(p),t.instance&&(t.instance.useModuleParams(p,t.instance.params),t.instance.useModule(p))}return p}(Framework7, typeof Framework7AutoInstallComponent === 'undefined' ? undefined : Framework7AutoInstallComponent))
